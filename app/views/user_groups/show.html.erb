<%= render(HeaderComponent.new(
  title: @user_group.name
)) do |c| %>
  <%= c.with_crumb("Home", home_path) %>
  <%= c.with_crumb("User Groups", user_groups_path) %>

  <%= c.with_action do %>
    <%= link_to(
      "Edit",
      edit_user_group_path(@user_group),
      class: "button"
    ) %>
  <% end %>

  <%= c.with_action do %>
    <%= button_to(
      "Delete",
      user_group_path(@user_group),
      method: "delete",
      data: {turbo_confirm: "Are you sure?"},
      class: "button button--danger"
    ) %>
  <% end %>
<% end %>

<div class="mb-6">
  <%= render(PillComponent.new(
    text: "#{@user_group.users_count} members",
    color: :blue
  )) %>
</div>

<%= render(UserGroupDetailsComponent.new(user_group: @user_group)) %>

<div class="mt-6 bg-white rounded-lg border border-gray-200 p-6">
  <h3 class="text-lg font-semibold mb-4">Manage Invitations</h3>

  <div class="mb-6" data-role="invitation-form">
    <h4 class="text-md font-medium mb-3">Invite user</h4>
    <%= simple_form_for(
      UserGroupInvitation.new,
      url: user_group_invitations_path(@user_group),
      html: {
        class: "flex gap-4 items-end"
      }
    ) do |form| %>
      <%= form.input(
        :email,
        required: true,
        wrapper_html: {
          class: "w-full"
        }
      ) %>
      <div>
        <%= form.submit("Send Invitation", class: "button") %>
      </div>
    <% end %>
  </div>

  <div>
    <h4 class="text-md font-medium mb-3">Pending Invitations</h4>
    <% if @pending_invitations.any? %>
      <div class="space-y-2">
        <% @pending_invitations.each do |invitation| %>
          <%= render(PendingInvitationComponent.new(invitation:)) %>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-500 italic">No pending invitations.</p>
    <% end %>
  </div>
</div>
