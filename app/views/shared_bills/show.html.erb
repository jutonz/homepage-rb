<%= render(HeaderComponent.new(
  title: @shared_bill.name
)) do |c| %>
  <%= c.with_crumb("Home", home_path) %>
  <%= c.with_crumb("Shared Bills", shared_bills_path) %>

  <%= c.with_action do %>
    <%= link_to(
      "Edit",
      edit_shared_bill_path(@shared_bill),
      class: "button"
    ) %>
  <% end %>

  <%= c.with_action do %>
    <%= button_to(
      "Delete",
      shared_bill_path(@shared_bill),
      method: "delete",
      data: {turbo_confirm: "Are you sure?"},
      class: "button button--danger"
    ) %>
  <% end %>
<% end %>

<div class="bg-white rounded-lg border border-gray-200 p-6">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Payees</h3>
    <%= link_to(
      "New Payee",
      new_shared_bill_payee_path(@shared_bill),
      class: "button"
    ) %>
  </div>

  <% if @payees.any? %>
    <div class="space-y-2">
      <% @payees.each do |payee| %>
        <div class="flex items-center justify-between p-3
                    bg-gray-50 rounded-lg"
             data-role="payee">
          <span class="font-medium"><%= payee.name %></span>
          <div class="flex gap-2">
            <%= link_to(
              "Edit",
              edit_shared_bill_payee_path(@shared_bill, payee),
              class: "button button--secondary button--small"
            ) %>
            <%= button_to(
              "Remove",
              shared_bill_payee_path(@shared_bill, payee),
              method: :delete,
              data: {turbo_confirm: "Remove #{payee.name}?"},
              class: "button button--danger button--small"
            ) %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-gray-500 italic">No payees yet.</p>
  <% end %>
</div>

<div class="mt-6 bg-white rounded-lg border border-gray-200 p-6">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Bills</h3>
    <%= link_to(
      "New Bill",
      new_shared_bill_bill_path(@shared_bill),
      class: "button"
    ) %>
  </div>

  <% if @bills.any? %>
    <div class="space-y-2">
      <% @bills.each do |bill| %>
        <div class="flex items-center justify-between p-3
                    bg-gray-50 rounded-lg"
             data-role="bill">
          <span class="font-medium"><%= bill.name %></span>
          <div class="flex gap-2">
            <%= link_to(
              "Edit",
              edit_shared_bill_bill_path(@shared_bill, bill),
              class: "button button--secondary button--small"
            ) %>
            <%= button_to(
              "Remove",
              shared_bill_bill_path(@shared_bill, bill),
              method: :delete,
              data: {turbo_confirm: "Remove #{bill.name}?"},
              class: "button button--danger button--small"
            ) %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-gray-500 italic">No bills yet.</p>
  <% end %>
</div>


